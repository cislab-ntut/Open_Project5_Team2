網路安全第五次報告!
===
### 私鑰分割
#### 第2組 

## 前提

在做區塊鏈應用的時候，最常碰到的一個問題就是，怎麼保管私鑰，怎麼讓使用者方便，但又同時是安全的。第一個想法就是備份金鑰（不論是passphrase/keystore/私鑰），但是如果把使用者金鑰(加密)備份到自己的server，只要server的安全上有個不小心，使用者的金鑰就可能就被盜取了，就算是加密過的，也難保不會被破解。那如果切成好幾部分，有好幾份備份呢? 那怎麼切，才能確保安全呢？

## 定義
	機密共享是指在一組參與者之間分配機密的方法，每個參與者都分配了該機密的一部分。只有將足夠數量（可能是不同類型）的份額組合在一起時，才能重建機密。單獨的股份本身沒有用處。在一種類型的秘密共享方案中，有一個發牌人和n個玩家。經銷商將秘密的份額提供給玩家，但是只有當滿足特定條件時，玩家才能夠從他們的份額重新構造秘密

	![](https://imgur.com/uBCzolF.png)

## 介紹	
		Shamir's Secret Sharing is an algorithm in cryptography created by Adi Shamir. It is a form of secret sharing, where a secret is divided into parts, giving each participant its own unique part.
	To reconstruct the original secret, a minimum number of parts is required. In the threshold scheme this number is less than the total number of parts. Otherwise all participants are needed to reconstruct the original secret.

	Shamir's Secret Sharing是一個由一位名叫Adi Shamir創造出來的加密演算法，是屬於一種加密分享，將密文分成數等分然後分配給每一位參加者一個獨立的part
	重建出明文需要有特定數量的part成能重建出來。這個特定數量又會少於part的總數量。
	

## 主要步驟

	1.如何拆分
	2.如何還原

### 如何拆分

	先定義一下要我們接下來要幹嘛
	把秘密（secret）拆分成Ｎ份，並且只需Ｍ（M < N）份即可組回完整的秘密，被拆分過的每一份秘密叫做share。
	建立一個(M-1)次方程式
	假設，我們要傳遞的秘密是數字3，然後希望3份（M=3）就能回復完整的秘密，所以要建立一個一元二次（Ｍ-1）方程式，y=ax ²+bx+c。
	a跟b可以任選，而c是秘密（在我們的例子就是3），我們選a=2, b=1，所以方程式為y=2x ²+x+3。

![](https://imgur.com/KsJuZTo.png)
      
	接著，我們任意取三點（因為M=3），（1, 6）,（2, 13）,（-2, 9）

![](https://imgur.com/WeaQaJC.png)

	而這三個點座標就是三個share。最終可以由這三個點座標(share)還原秘密(secret)。

### 如何還原

	目標是，還原(M-1)次方程式。
	若能取得原本的方程式，即可拿到秘密。我們知道兩點可以成一直線，而三點可以定義一個拋物線。現在，我們有三個點（1, 6）,（2, 13）,（-2, 9），但不知道曲線

![](https://imgur.com/nkwRfKi.png)

	不過M=3，所以可以知道方程式為y=ax ²+bx+c，然後，我們知道三個座標（1, 6）,（2, 13）,（-2, 9），
	（1, 6） => c = a + b -6
	（2, 13） => c = 4a + 2b -13
	（-2, 9） => c = 4a -2b - 9

	過程就不推導了，最後就可以得出a=2, b=1然後我們的秘密數字c=3。

	另一種解法: Lagrange polynomial

![](https://imgur.com/h5dkkbA.png)
	我們目前已知三點
	f(1) = 6
	f(2) = 13
	f(-2) = 9
	帶入上述多項式，可得

![](https://imgur.com/FfrEE6K.png)
	最後得到一樣的方程式2x²+x+3。
	在Shamir Secret Sharing中，需要選定一質數Ｐ，而Secret需要小於質數。所以最後方程式得出的值需要再對質數Ｐ取餘數。